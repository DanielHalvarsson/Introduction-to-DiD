\documentclass[notes,11pt, aspectratio=169]{beamer}

\usepackage{pgfpages}
% These slides also contain speaker notes. You can print just the slides,
% just the notes, or both, depending on the setting below. Comment out the want
% you want.
\setbeameroption{hide notes} % Only slide
%\setbeameroption{show only notes} % Only notes
%\setbeameroption{show notes on second screen=right} % Both

\usepackage{helvet}
\usepackage[default]{lato}
\usepackage{array}
\usepackage{tgbonum}
\usepackage{tikz}
\setbeamertemplate{note page}{\pagecolor{yellow!5}\insertnote}
\usetikzlibrary{positioning}
\usetikzlibrary{snakes}
\usetikzlibrary{calc}
\usetikzlibrary{arrows}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{matrix,shapes,arrows,fit,tikzmark}
\usepackage{amsmath}
\usepackage{mathpazo}
\usepackage{hyperref}
\usepackage{lipsum}
\usepackage{multimedia}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{dcolumn}
\usepackage{bbm}
\usepackage{xcolor}
\newcolumntype{d}[0]{D{.}{.}{5}}

\usepackage{changepage}
\usepackage{appendixnumberbeamer}
\newcommand{\beginbackup}{
   \newcounter{framenumbervorappendix}
   \setcounter{framenumbervorappendix}{\value{framenumber}}
   \setbeamertemplate{footline}
   {
     \leavevmode%
     \hline
     box{%
       \begin{beamercolorbox}[wd=\paperwidth,ht=2.25ex,dp=1ex,right]{footlinecolor}%
%         \insertframenumber  \hspace*{2ex} 
       \end{beamercolorbox}}%
     \vskip0pt%
   }
 }
\newcommand{\backupend}{
   \addtocounter{framenumbervorappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumbervorappendix}} 
}


\usepackage{graphicx}
\usepackage[space]{grffile}
\usepackage{booktabs}
\newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}
\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}
\DeclareMathOperator{\Supp}{Supp}

% These are my colors -- there are many like them, but these ones are mine.
\definecolor{blue}{RGB}{0,114,178}
\definecolor{red}{RGB}{213,94,0}
\definecolor{yellow}{RGB}{240,228,66}
\definecolor{green}{RGB}{0,158,115}

\hypersetup{
  colorlinks=false,
  linkbordercolor = {white},
  linkcolor = {blue}
}


%% I use a beige off white for my background
\definecolor{MyBackground}{RGB}{255,253,218}

%% Uncomment this if you want to change the background color to something else
%\setbeamercolor{background canvas}{bg=MyBackground}

%% Change the bg color to adjust your transition slide background color!
\newenvironment{transitionframe}{
  \setbeamercolor{background canvas}{bg=yellow}
  \begin{frame}}{
    \end{frame}
}

\DeclareFontFamily{U}{skulls}{}
\DeclareFontShape{U}{skulls}{m}{n}{ <-> skull }{}
\newcommand{\skull}{\text{\usefont{U}{skulls}{m}{n}\symbol{'101}}}

\setbeamercolor{frametitle}{fg=blue}
\setbeamercolor{title}{fg=black}
\setbeamertemplate{footline}[frame number]
\setbeamertemplate{navigation symbols}{} 
\setbeamertemplate{itemize items}{-}
\setbeamercolor{itemize item}{fg=blue}
\setbeamercolor{itemize subitem}{fg=blue}
\setbeamercolor{enumerate item}{fg=blue}
\setbeamercolor{enumerate subitem}{fg=blue}
\setbeamercolor{button}{bg=MyBackground,fg=blue,}



% If you like road maps, rather than having clutter at the top, have a roadmap show up at the end of each section 
% (and after your introduction)
% Uncomment this is if you want the roadmap!
% \AtBeginSection[]
% {
%    \begin{frame}
%        \frametitle{Roadmap of Talk}
%        \tableofcontents[currentsection]
%    \end{frame}
% }
\setbeamercolor{section in toc}{fg=blue}
\setbeamercolor{subsection in toc}{fg=red}
\setbeamersize{text margin left=1em,text margin right=1em} 

\newenvironment{wideitemize}{\itemize\addtolength{\itemsep}{10pt}}{\enditemize}

\usepackage{environ}
\NewEnviron{videoframe}[1]{
  \begin{frame}
    \vspace{-8pt}
    \begin{columns}[onlytextwidth, T] % align columns
      \begin{column}{.70\textwidth}
        \begin{minipage}[t][\textheight][t]
          {\dimexpr\textwidth}
          \vspace{8pt}
          \hspace{4pt} {\Large \sc \textcolor{blue}{#1}}
          \vspace{8pt}
          
          \BODY
        \end{minipage}
      \end{column}%
      \hfill%
      \begin{column}{.38\textwidth}
        \colorbox{green!20}{\begin{minipage}[t][1.2\textheight][t]
            {\dimexpr\textwidth}
            Face goes here
          \end{minipage}}
      \end{column}%
    \end{columns}
  \end{frame}
}

\title[]{\textcolor{blue}{Difference-in-Differences and Roll-out (Staggered) Treatment Designs}}
\author[DH]{}
\institute[Ratio]{\small{\begin{tabular}{c}
  Daniel Halvarsson  \\
\end{tabular}}}

\date{\today}

\begin{document}

%%% TIKZ STUFF
\tikzset{   
        every picture/.style={remember picture,baseline},
        every node/.style={anchor=base,align=center,outer sep=1.5pt},
        every path/.style={thick},
        }
\newcommand\marktopleft[1]{%
    \tikz[overlay,remember picture] 
        \node (marker-#1-a) at (-.3em,.3em) {};%
}
\newcommand\markbottomright[2]{%
    \tikz[overlay,remember picture] 
        \node (marker-#1-b) at (0em,0em) {};%
}
\tikzstyle{every picture}+=[remember picture] 
\tikzstyle{mybox} =[draw=black, very thick, rectangle, inner sep=10pt, inner ysep=20pt]
\tikzstyle{fancytitle} =[draw=black,fill=red, text=white]
%%%% END TIKZ STUFF

% Title Slide
\begin{frame}
\maketitle
\end{frame}

\begin{frame}{Don't take my word for it}
    \begin{center}
        \includegraphics[width=0.9\linewidth]{Ref.png}
    \end{center}
\end{frame}

\begin{frame}{Difference-in-Difference and empirical relevance}
    \begin{center}
        \includegraphics[width=0.6\linewidth]{AEA.png}
    \end{center}
    \begin{itemize}
        \item Difference-in-Difference (or DiD) is one of the most widely used methods for estimating causal effects in non-experimental settings. 
    \end{itemize}
    \end{frame}


\begin{frame}{DiD and causal parameter estimation}
        \begin{wideitemize} 
        \item What \emph{type of causality} are we after?
        \item  In a DiD setting the likely \textbf{causal parameter (estimand) of interest} is the ATT (average treatment effect of the treated). 
        
        \item It is well known that for basic setups the DiD estimate corresponds to the ATT under the combined assumption of \textit{parallel trends} and \textit{no-anticipation}. 
        
        \item The work horse model for estimating DiD is the so called two-way fixed effect linear regression model, or for short \textbf{TWFE}. 
        \end{wideitemize}
    \end{frame}

\begin{frame}{The problem with TWFE and "the secrete shame of econometrics"}
\begin{columns}[T] % align columns
    \begin{column}{0.6\textwidth}
      \begin{wideitemize} 
        \item The TWFE model is well understood and commonly applied to the basic $2\times2$ setup or to the multiple periods (event-study) setup.
        \item However, for a roll-out (staggered) treatment design, with different groups getting treated at different times, the TWFE model no longer works.
        \item \textbf{The problem} can be quite serious: with DiD estimates displaying a negative average effect despite the true effect being positive for everyone in the sample. 
            \end{wideitemize}
    \end{column}%
    \hfill%
    \begin{column}{.4\textwidth}
    \begin{center}
 \includegraphics[width=0.65\linewidth]{GoT.png}                 
    \end{center}
    \end{column}
  \end{columns}
  "For decades researchers were basically unaware of this problem and used two-way fixed effects anyway." - \color{gray}{The Effect}
    \end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{The State of the DiD literature}
  \begin{columns}[T] % align columns
    \begin{column}{.6\textwidth}
      \begin{wideitemize}
      \item Things are moving fast 

      \item This literature has had a certain amount of upheaval over the past 5-6 years. 
        
      \item With the upheaval there is a \textbf{tension} for how people currently and historically have used DiD.

      \item The modern literature has pointed out many issues but has provided solutions to almost all of the them.
      
      \item Good tools are now readily available (including Stata), so nothing to prevent you from using a DiD with staggered analysis.

      \end{wideitemize}
    \end{column}%
    \hfill%
    \begin{column}{.4\textwidth}
       \includegraphics[width=0.8\linewidth]{1000004356.jpg}                 
    \end{column}%
  \end{columns}
\end{frame}

\begin{frame}{Simple setup $2\times 2$ DiD }
  \begin{wideitemize}
  \item Assume we have $n$ units $i$ and $T=2$ time periods $t$ 
  \item Consider a \textbf{binary} policy $D_{it}$, and we are interested in estimating its effect on outcomes $Y_{it}$.
  \item Consider the \textbf{potential outcome} notation for $Y_{it}$:
    \begin{itemize}
    \item $Y_{it}(0,0)$ is the outcome in period $t\in \{1,2\}$ if untreated in both periods.
    \item $Y_{it}(0,1)$ is the outcome in period $t\in \{1,2\}$ if
      untreated in first period, treated in second.
    \item Can simplify to just $Y_{it}(0)$ and $Y_{it}(1)$, but when
      we have many time periods, want to account for path of treatments.
    \end{itemize}
  \item The inherent problem is that $D_{it}$ is \textbf{not}
    necessarily randomly assigned, but we still want to estimate the ATT in period 2:
    \begin{equation*}
      \tau_{2}^{ATT} = E(Y_{i,2}(1) - Y_{i,2}(0) | D_{i} = 1)
    \end{equation*}
    \item It's a measure of \textit{the average causal effect on the treated units} at the time they are treated. 
  \end{wideitemize}
\end{frame}

\begin{frame}{How can we identify the ATT in the basic 2x2 DiD setup?}
  \begin{wideitemize}
      \item The challenge lies in the untreated potential outcome $Y_{i,2}(0)$ for the treated group, \textbf{which is unobserved}.  
      \item Difference in difference methods overcome this challenge via two assumptions, namely:
  \end{wideitemize}
  \begin{enumerate}
  \item Parallel Trends: ``in the \textbf{absence} of the treatment, the average outcomes would have evolved in parallel''
    \begin{equation*}
        E(Y_{i,2}(0) - Y_{i,1}(0) | D_{i} = 1) =     E(Y_{i,2}(0) - Y_{i,1}(0) | D_{i} = 0)
      \end{equation*}
    \item No-anticipation: policy has no effect prior to treatment
    \begin{equation*}
        Y_{i,1}(0) = Y_{i,1}(1) 
      \end{equation*}
    \end{enumerate}
    \begin{wideitemize}
        \item Under assumptions 1 and 2 it follows that $\tau_{2}^{ATT}$ is identified by the DiD of population means (i.e. DiD is unbiased estimator of ATT):
        \end{wideitemize}
          \begin{align*}
      \Delta_{DiD}=E(Y_{i,2} - Y_{i,1} | D_{i} = 1) - E\left(Y_{i,2} - Y_{i,1}\right| D_{i} = 0)=\tau_{2}^{ATT}. 
    \end{align*}
\end{frame}

\begin{frame}{Estimation using linear regression (TWFE) in the $2\times 2$ setup}
  \begin{wideitemize}
  \item Provided $D_{i}$ is not correlated with $\alpha_{i}$, a simple linear regression will identify the ATT effect with two time periods:
  \begin{equation}
  Y_{ist} = \alpha + \beta_1 Treat_s + \beta_2 Post_t + \beta_{DiD} Treat_s \times Post_t + \epsilon_{it}
  \end{equation}
  where $\beta_{DiD}$ is the Difference-in-Difference estimate corresponding to $\Delta_{did}$. 
  \item If $D_{i}$ is correlated with $\alpha_{i}$ a fixed effects regression will identify the ATT: 
  \begin{equation}
  Y_{it} = \alpha_{i}+ \gamma_{t} + D_{it}\beta_{DiD} + \epsilon_{it}
  \end{equation}
  \item This latter setup is referred to as the Two-way Fixed Effects estimator (TWFE). 
  \item Necessary condition: two time periods! (within estimation is equivalent to first-differences estimation) What if we have more periods?
  \end{wideitemize}
\end{frame}

\begin{frame}{Multiple time periods in basic setup event study}
  \begin{wideitemize}
  \item  More time periods helps in several ways:
  \end{wideitemize}
  
\begin{enumerate}[1]
    \item If we have multiple periods \emph{before} the policy implementation, we can partially test the underlying assumptions
    \item If we have multiple periods \emph{after} the policy implementation, we can examine effect timing
      \begin{itemize}
    
      \item If you pool all time periods together into one ``post'' variable, this estimates the average effect.
      \end{itemize}
    \end{enumerate}
   \begin{wideitemize}
  \item  How is an event-study implemented? Let's consider a policy that occurs all at $t_{0}$. Event-study TWFE yields:
   \end{wideitemize} 
  
\begin{equation*}
Y_{it}=\sum_{h=1}^{t_0-2}\alpha_h \underbrace{1\left[D_i=1\right]\times 1\left[t=h\right]}_{\text{Pre-period d.v.} }+\sum_{k=t_0}^{T}\beta_k \underbrace{1\left[D_i=1\right]\times 1\left[t=k\right]}_{\text{Post-period d.v.}}+\alpha_i+\gamma_t+\varepsilon_{ist}
\end{equation*}
    \begin{itemize}
      \item It works by comparing outcomes with a never treated group in the pre-period time $t=t_0-1$.
      \end{itemize}
  \end{frame}

\begin{frame}{Pre-testing and structural assumptions}
  \begin{wideitemize}
  \item To partially test the assumption we can impose a stronger assumption about trends
      \begin{wideitemize}
      \item If the common trends assumption applies to \textbf{all periods}, not just the post-periods in combination with no-anticipation we expect that $ATT(t_0,t_0-h)=0$. Thus, rejection the null that $\alpha_h=0$ implies that the stronger common trend + no anticipation assumption fail.
      \end{wideitemize}
      \item This is very powerful and has helped spark the growth in DinD regressions
    \begin{itemize}
    \item Visual demonstrate of ``pre-trends''\textbf{ helps support the validity of the design}
    \item Worth doing!
    \end{itemize}
  \item Two key issues:
    \begin{enumerate}
    \item Pre-testing can cause statistical problems as it will cause you to potentially contaminate your
      design.
    \begin{itemize}
    \item See suggested solution from Roth (2020) to incorporate robustness to
    pre-trends into your analysis. Rambachan and Roth (2020) present
    results on testing sensitivity of DiD results to pre-trends.
    \end{itemize}
    \item What do parallel trends even mean? 
    \begin{itemize}
    \item Roth and Sant'Anna (2021) directly discuss this issue at length.
    \end{itemize}
    \end{enumerate}
  \end{wideitemize}
\end{frame}


\begin{frame}{Roll-out adoption (staggered treatment) design}
      \begin{wideitemize}
          \item Expands the event-study and $2\times2$ designs to allow for \textit{multiple groups} with \textit{different treatment adoption dates}. Example is a policy with a regional roll-out such that the policy is adopted in different areas at different dates.

    \begin{center}
        \includegraphics[width=0.6\linewidth]{StaggeredRollout.png}
    \end{center}
          
          \item \textbf{Staggered treatment adoption} simply means that: $D_{i,t}=1 \implies D_{i,t+1} = 1 $ for $t=1,2,...,T$, such that the treatment is absorbing and does not turn on-off.
      \end{wideitemize}
\end{frame}

\begin{frame}
\begin{center}
"We focus on the setting where units, e.g., individuals, firms, or states, adopt the policy or treatment of interest at a particular point in time, and then remain exposed to this treatment at all times afterwards. \textbf{The adoption date at which units are first exposed to the policy may, but need not, vary by unit}. We refer to this as a staggered adoption design" (Athey and Imbens, NBER 2018)
\end{center}
\end{frame}

\begin{frame}{Staggered treatment as many different sub-experiments}
      \begin{wideitemize}
          \item For each treated group $s$, the causal parameter $ATT(t_s,t_s+k)$ and the DiD comparison is identical to the event-study specification, but where the control group is defined as all groups with adoption dates after the focal post-period.
          \item Plenty of causal effect estimates: What to do with them? 
         \begin{wideitemize}
          \item In a small design, it could be be beneficial to analyze each of the sub-experiments separately to gain insight into treatment effect heterogeneity, although it may be statistically inefficient.
          \item In a larger study, a separate analysis may not simply be feasible (nor desirable). 
          \end{wideitemize} 
          \item For both cases it's often desirable to average or aggregate the $group\times time$ estimates into a single causal effect parameter or envent-study parameters (ATT)  
          \item For this purpose we\textbf{ can't rely on the TWFE model for aggregation}, without imposing strong and quite artificial assumptions. In general the TWFE model don't map to any conceptual causal parameter of interest.
      \end{wideitemize}
\end{frame}

\begin{frame}{When TWFE is NOT a problem in staggered adoption design}
      \begin{wideitemize}
         \item However, despite the severity of the problem, as emphasized at the beginning, there are situations where TWFE estimates may not be very different from more theoretically favorable approaches, and therefore be appealing because of their simplicity.

        \item Given the TWFE specification 
         \begin{equation*} 
Y_{i,t}=\alpha_i + \gamma_t +D_{i,t}\beta +\varepsilon_{i,t},  
         \end{equation*}
with $D_{i,t}$ being an indicator for whether unit $i$ is treated in time $t$. 
      
         \item If there is no treatment effect heterogeneity across both units or time the population regression coefficient $\beta$ equals the ATT.
         \item There is a common alternative "dynamic specification" to the "static" TWFE above   with time relative to treatment. This version of the TWFE results in sensible estimates when there is only treatment effect heterogeneity in the time size treatment. %It requires that the treatment effect is on average the same r-years after treatment, regardless of the calendar years the treatments were rolled out. 
        \end{wideitemize}
\end{frame}

\begin{frame}{The problem}
      \begin{wideitemize}
        \item The problem is somewhat complex. 
        \item TWFE relies on \textbf{within variation} for comparing treated and controls. It means that units that \textit{remains untreated} during the period end up as controls, but the same goes for units that \textit{remains treated} from earlier roll-outs.
        \item \textbf{IF} treatment effect varies with treatment time e.g. effects grow larger over time, earlier treated units in the control group will have an increasing trend that is distinct from just-now-treated units, 
        \item \textbf{THEN} parallel trends assumption breaks and identification fails.  
        \end{wideitemize}
        \end{frame}
        
      \begin{frame}{Goodman-Bacon Decomposition}
      \begin{wideitemize}
          
      \item An influential paper, Goodman-Bacon (2021) showed that TWFE estimators in a staggered setting can be expressed as a weighted average of the of all underlying DiDs.
    
      \item \textbf{Their contribution} was the insight that some of the DiDs are actually confounded despite them individually satisfying the common trend + no anticipation assumptions!
      \item There are 4 types of DiD comparisons between treated and control implicitly made in the TWFE model 
      \begin{enumerate}
      \item Treated (early and late) vs. Never treated DiDs
      \item Early vs. Late DiDs
      \item Late vs. Early DiDs $\skull$
      \end{enumerate}
       The potentially problematic comparison being the 'Late vs. Early' where a treatment group is compared to a group that is already treated!
.   
      \item How large is the problem: Use  \textbf{bacondecomp} in Stata for Goodman-Bacon decomposition.  
      \end{wideitemize}
\end{frame}


\begin{frame}{What to do with staggered timing in DiD?}

  \begin{center}
      "What to do then, when we have a nice roll-out design? Don't use two-way fixed effects, but also don't despair. \textbf{You're not out of luck, you're just moving into the realm of what the pros do}." \color{gray}{(The effect)}
  \end{center}
  
  \begin{wideitemize}
  \item There's really no reason to use the baseline TWFE in staggered timings
    \begin{itemize}
    \item A perfect example wherein the estimator does not generate an
      estimate that maps to a meaningful estimand
    \end{itemize}
  \item There are different approaches proposed in the literature  that are just as good! 
    \begin{itemize}
    \item Here, I look at Callaway and Sant'anna (2020) and Sun and Abraham (2020)     
    \end{itemize}
  \item These all are robust to this issue, but circumstances may vary slightly, e.g. are the \textbf{panel balanced} or the \textbf{treatment absorbing}?
  \end{wideitemize}
\end{frame}

\begin{frame}{Modified event-study design: Sun and Abraham, 2020}
\begin{wideitemize}
    \item Starting from the basic event-study design, it can be modified to include many groups with a staggered roll-out.
    \item First, each of the sub-experiments are \textbf{centered} relative to their own treatment start.
    
    \begin{itemize}
        \item It keeps track on the already treated groups so that they don't get included in comparisons.
    \end{itemize}
    
    \item Second, Sun and Abraham then propose that the relative time dummies are \textbf{interacted} with group dummies such that each treated $group\times relative-time-dummies$ get their own effect. 
    
    \item It's then up to you to avoid making bad comparisons when averaging coefficients to get e.g. the time-varying treatment effect (see example below).

    \item Each effect is either compared to the group of (i) never treated observation or (ii) not yet treated observations (from the last treated group(s)).
    
\end{wideitemize}
\end{frame}

\begin{frame}{Modified event-study design: Sun and Abraham, 2020}
\begin{wideitemize}
    \item Sun and Abraham (2020) can be accessed in Stata using the \textbf{eventstudyintereact} package. 
    \item In my experience: 
    \begin{wideitemize}
    \item it's easy to implement, but not very robust when tinkering with choice parameter.
    \item Ideally you have a balanced panel (which I did not).
    \item Beware of the potentially huge number of parameter to be estimated (the new Twitter estimator).
    \item It's also fairly straight forward to compare effects across groups, e.g. how males and females are affected differently by foreign acquisitions (Halvarsson et. al., WP 2023) 
    \item Lastly, it's very difficult to get customized output in the form of aggregate result tables. 
    \end{wideitemize}
\end{wideitemize}
\end{frame}

\begin{frame}{Stata: Sun and Abraham, 2020 }
        \begin{center}
     \includegraphics[width=\textwidth]{code1.png}
    \end{center}  
\end{frame}

\begin{frame}{Stata: Sun and Abraham, 2020}
        \begin{center}
     \includegraphics[width=\textwidth]{code2.png}
    \includegraphics[width=0.4\textwidth]{Plot_Event_1.pdf}
    \end{center}  
\end{frame}


\begin{frame}{Callaway and Sant'anna (2020)} 
  \begin{wideitemize}
  \item Callaway and Sant'anna (2020) propose the following building block estimand:
    \begin{equation*}
      \tau_{ATT}(g,t) = E(Y_{it}(g) - Y_{it}(\infty) | D_{i} = g), 
    \end{equation*}
    \textbf{the ATT in period $t$ for those units first treated in period $g$.} 
    \item For example, $\tau_{ATT}(2015,2020)$, gives the average treatment effect in 2020 for the units first treated in 2015    
    \begin{wideitemize}
    \item In the 2x2 case, this was exactly our effect!
   \end{wideitemize}
       \item The ATT can be identified by comparing the outcome at $t$ with that in $g-1$ for the treated group $g$, with the outcome in $t$ compared to the outcome in $g-1$ for a comparison group that is not yet treated. Formally
    \begin{equation*}
        ATT(g,t)=E(Y_{i,t}-Y_{i,g-1}|G_i=g)-E(Y_{i,t}-Y_{i,g-1}|G_i=g')\;\; \text{for any }g'>t. 
    \end{equation*}
     \end{wideitemize}
    \end{frame}

\begin{frame}{Callaway and Sant'anna (2020)}
\begin{itemize}
  \item Using these estimands, C\&S provide a very natural set of potential ways to aggregate these estimands. Take e.g. the "event-study" of the average treatment effect $k$ times after first treatment across the different groups $g$ (cohorts)
\end{itemize}

\begin{equation}
    ATT^w_k=\sum_g w_g ATT(g,g+k)
\end{equation}

\begin{itemize}
    \item The weight $w_g$ can be chosen to weight groups equally, or relative their share of the treated sample. 
    \item C\&S highlights two advantages:
    \begin{enumerate}
        \item It works! And gives full control over the weighting scheme compared to TWFE
        \item Makes transparent which units are used as a control group.
    \end{enumerate}
    \item But they also contributes by allowing for time invariant covariates to be incorporated in the model (Not going to talk about that here).
\end{itemize}
\end{frame}

\begin{frame}{Callaway and Sant'anna (2020)}
\begin{itemize}

\item Have not yet tried C\&S myself, but it's sounds intuitive. 
\item It's one of the most popular staggered DiD estimators alongside: de Chaisemartin and d'Haultfoeuille (2020), which allows for \textcolor{blue}{non-absorbing treatments}, the \textcolor{green}{"stacked" estimator} of Baker, Larcker, and Wang (2021); Wooldridge (2021) \textcolor{orange}{two-way Mundlak regrssion}; and  Dube, Girardi, Jordà \& Taylor (2023) \textcolor{magenta}{local projections approach} to staggered DiD, which we ended up using in Halvarsson et al. (2023) 

\item C\&S is now part of the standard DiD package in Stata under \textbf{csdid}.
\item A further note on covariates in general:
\begin{itemize}
    \item While many modern estimators allow for weaker identifying assumptions of parallel trends conditional on a set of time invariant covariates time variant covariants requires strong assumptions:
    \item That covariates are not affect by the treatment and don't impact the effect of the treatment. 
\end{itemize}
\end{itemize}
\end{frame}

\begin{frame}{Most recent contributions}
\begin{wideitemize}
    \item Roth (2024) "Interpreting Event-Studies from Recent Difference-in-Difference Methods" identifies an inherent flaw relying on \emph{visual heuristics} for analyzing estimates in e.g. C\&S, which can display a kink at the time of treatment. 
\end{wideitemize}
  \begin{columns}[T] % align columns
    \begin{column}{.4\textwidth}
    \begin{wideitemize}
        \item Post treatment estimates are still valid, if parallel trends hold. Can't rely on visuals to judge whether post treatment estimates result from a violation of parallel trends.  
        \item Remedy: Use "long-differences" for both pre-treatment estimates and post treatment-estimates in event-study plots (the same baseline)
        
    \end{wideitemize}
    \end{column}%
    \hfill%
    \begin{column}{.6\textwidth}
       \includegraphics[width=0.9\linewidth]{Event_Roth.png}                 
    \end{column}%
    \end{columns}       
\end{frame}


\begin{frame}{Conclusion}
No reason to feel \textbf{ashamed} any longer: Software exists. This is doable!
    \begin{center}
     \includegraphics[width=0.65\textwidth]{PAckages.png}
    \end{center}   
\end{frame}

\end{document}